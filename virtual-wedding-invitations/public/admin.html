<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Admin Invitaciones</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="styles/main.css">
  <style>
        body {
            background: var(--marfil);
        }
        .admin-panel {
            max-width: 700px;
            margin: 5vw auto 0 auto;
            background: var(--blanco);
            border-radius: 18px;
            box-shadow: 0 4px 24px rgba(163, 131, 58, 0.10);
            padding: 2.5em 2em 2em 2em;
        }
        .admin-title {
            font-family: 'Playfair Display', serif;
            color: var(--olivo);
            font-size: 1.6em;
            margin-bottom: 1.2em;
            text-align: center;
        }
        .admin-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 2em;
        }
        .admin-table th, .admin-table td {
            border: 1px solid var(--oro);
            padding: 0.7em 0.5em;
            text-align: center;
            font-size: 1em;
        }
        .admin-table th {
            background: var(--marfil);
            color: var(--olivo);
            font-weight: 700;
        }
        .admin-table tr:nth-child(even) {
            background: #faf8f4;
        }
        .admin-actions {
            display: flex;
            gap: 0.5em;
            justify-content: center;
        }
        .admin-btn {
            background: var(--olivo);
            color: var(--blanco);
            border: none;
            border-radius: 6px;
            padding: 0.4em 1em;
            font-size: 0.98em;
            cursor: pointer;
            transition: background 0.2s;
        }
        .admin-btn.delete {
            background: var(--oro);
        }
        .admin-btn:hover {
            background: #5d7c5d;
        }
        .admin-btn.delete:hover {
            background: #b8a47d;
        }
        .admin-footer {
            text-align: center;
            color: var(--olivo);
            font-size: 1em;
            margin-top: 2em;
            opacity: 0.7;
        }
    </style>
</head>
<body class="admin-body">
  <main class="admin-panel">
    <h1>Panel de Invitados</h1>

    <section class="create-guest">
      <h2>Crear invitado</h2>
      <form id="createGuestForm">
        <label>
          Nombre completo:
          <input type="text" id="guestNameInput" placeholder="Ej: Juan PÃ©rez" required>
        </label>
        <button type="submit" class="btn-principal">Generar link</button>
      </form>
      <div id="createGuestMessage" class="response-message"></div>
    </section>

    <section class="guest-list-section">
      <h2>Invitados</h2>
      <div class="list-actions">
        <button id="refreshListBtn" class="btn-secundario">Actualizar</button>
        <button id="exportCsvBtn" class="btn-secundario">Exportar CSV</button>
      </div>
      <div class="table-wrapper">
        <table class="guest-table">
          <thead>
            <tr>
              <th>Nombre</th>
              <th>Link</th>
              <th>Asistencia</th>
              <th>Hospedaje</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody id="guestTableBody">
            <tr><td colspan="5">Cargando...</td></tr>
          </tbody>
        </table>
      </div>
      <div id="listMessage" class="response-message"></div>
    </section>
  </main>

  <template id="guestRowTemplate">
    <tr>
      <td data-field="nombre"></td>
      <td data-field="link" class="small-col">
        <button data-action="copy" class="mini-btn">Copiar</button>
      </td>
      <td data-field="asistencia" class="status-cell"></td>
      <td data-field="hospedaje" class="status-cell"></td>
      <td data-field="acciones" class="small-col">
        <button data-action="delete" class="mini-btn danger">Borrar</button>
        <button data-action="reset" class="mini-btn">Reset</button>
      </td>
    </tr>
  </template>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm"></script>
  <script type="module" src="scripts/admin.js"></script>
</body>
</html>
